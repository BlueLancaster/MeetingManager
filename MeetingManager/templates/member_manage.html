{% extends "template.html" %}
{% block title %}
<h2>人員管理</h2>
{% endblock title %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-3">
            <div>
                <h2>人員列表</h2>
                <button type="button" class="btn btn-success text-end ms-auto" onclick="create()">建立</button>
            </div>
            <div class="list-group" style="max-height:300px; margin-top: 5px" id="memberList">
                <button type="button" class="list-group-item list-group-item-action memberBtn active" id="choice">王老鼠
                </button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">黑老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">白老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">林老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">輝老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">尼老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">米老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">軌老鼠</button>
                <button type="button" class="list-group-item list-group-item-action memberBtn">闢老鼠</button>
            </div>
        </div>
        <div class="col-9">
            <form method="post" action="{{url_for('submitMemberData')}}">
                <div>
                    <h2>功能列</h2>
                    <button type="submit" class="btn btn-success text-end ms-auto">儲存</button>
                </div>
                <div style="margin-top:5px">
                    <div class="mb-3">
                        <h5 for="name" class="form-label" required>姓名</h5>
                        <input class="form-control" id="name" name="name" placeholder="">
                    </div>
                    <div class="mb-3 col-4">
                        <h5>身分</h5>
                        <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" id="role" name="role" onchange="roleChange(this)">
                            <option selected style="display:none">請選擇</option>
                            <option value="0">系上老師</option>
                            <option value="1">系助理</option>
                            <option value="2">校外老師</option>
                            <option value="3">業界專家</option>
                            <option value="4">學生代表</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <h5 for="sex" class="form-label">性別</h5>
                        <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" id="sex" name="sex"">
                            <option selected style="display:none">請選擇</option>
                            <option value="0">男</option>
                            <option value="1">女</option>
                            <option value="2">其他</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <h5 for="phone" class="form-label" required>手機</h5>
                        <input class="form-control" id="phone" name="phone" placeholder="">
                    </div>
                    <div class="mb-3">
                        <h5 for="email" class="form-label" required>email</h5>
                        <input type="email" class="form-control" id="email" name="email" placeholder="">
                    </div>
                    <div id="content">
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    function roleChange(select) {
        if (select.value == 0) {
            $(content).empty();
            $(content).append($(pr).html())
        } else if (select.value == 1) {
            $(content).empty();
            $(content).append($(assistant).html())
        } else if (select.value == 2) {
            $(content).empty();
            $(content).append($(teacher).html())
        } else if (select.value == 3) {
            $(content).empty();
            $(content).append($(expert).html())
        } else if (select.value == 4) {
            $(content).empty();
            $(content).append($(student).html())
        }
    };

    $(memberList).on('click', '.memberBtn', function () {
        document.getElementById("choice").classList.remove("active");
        document.getElementById("choice").disabled = "";
        document.getElementById("choice").id = "";
        this.classList.add("active");
        this.id = "choice";
        this.disabled = "disabled";
    });

    function create() {
        document.getElementById("choice").classList.remove("active");
        document.getElementById("choice").disabled = "";
        document.getElementById("choice").id = "";
        $(memberList).append($(newMemberBtn).html());
        $(newMember).attr('id','choice');
        document.getElementById("memberList").scrollTop = document.getElementById("memberList").scrollHeight;
    }


    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
    $('.memberBtn').click(
        function (){
            $.ajax({
                  url:$SCRIPT_ROOT+"/getMemberData",
                  method:"GET",
                  success:function(data){
                    document.getElementById("name").value=data.name;
                    document.getElementById("sex").value=data.sex;
                    document.getElementById("phone").value=data.phone;
                    },
                  contentType: false,
                  processData: false,
                  dataType: "json"
            });

        }
    );

</script>
<script id="pr">
    <div class="mb-3 col-4">
        <h5>職級</h5>
        <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" id="rank" name="rank">
            <option selected style="display:none">請選擇</option>
            <option value="0">教授</option>
            <option value="1">副教授</option>
            <option value="2">助理教授</option>
        </select>
    </div>
    <div class="mb-3">
        <h5 for="officePhone" class="form-label">辦公室電話</h5>
        <input class="form-control" id="officePhone" name="officePhone" placeholder="">
    </div>
</script>
<script id="assistant">
    <div class="mb-3">
        <h5 for="officePhone" class="form-label">phone</h5>
        <input class="form-control" id="officePhone" name="officePhone" placeholder="">
    </div>
</script>
<script id="teacher">
    <div class="mb-3">
        <h5 for="school" class="form-label">任職學校</h5>
        <input class="form-control" id="school" name="school" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="department" class="form-label">系所</h5>
        <input class="form-control" id="department" name="department" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="title" class="form-label">職稱</h5>
        <input class="form-control" id="title" name="title" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="officePhone" class="form-label">辦公室電話</h5>
        <input class="form-control" id="officePhone" name="officePhone" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="address" class="form-label">聯絡地址</h5>
        <input class="form-control" id="address" name="address" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="bankAccount" class="form-label">銀行(郵局帳號)</h5>
        <input class="form-control" id="bankAccount" name="bankAccount" placeholder="">
    </div>
</script>
<script id="expert">
    <div class="mb-3">
        <h5 for="company" class="form-label">任職公司</h5>
        <input class="form-control" id="company" name="company" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="title" class="form-label">職稱</h5>
        <input class="form-control" id="title" name="title" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="officePhone" class="form-label">辦公室電話</h5>
        <input class="form-control" id="officePhone" name="officePhone" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="address" class="form-label">聯絡地址</h5>
        <input class="form-control" id="address" name="address" placeholder="">
    </div>
    <div class="mb-3">
        <h5 for="bankAccount" class="form-label">銀行(郵局帳號)</h5>
        <input class="form-control" id="bankAccount" name="bankAccount" placeholder="">
    </div>
</script>
<script id="student">
    <div class="mb-3">
        <h5 for="ID" class="form-label">學號</h5>
        <input class="form-control" id="ID" name="ID" placeholder="">
    </div>
    <div class="mb-3 col-4">
        <h5>學制</h5>
        <select class="form-select form-select-lg mb-3" aria-label=".form-select-lg example" id="Esystem"
                name="Esystem">
            <option selected style="display:none">請選擇</option>
            <option value="0">大學部</option>
            <option value="1">研究所</option>
        </select>
    </div>
    <div class="mb-3">
        <h5 for="grade" class="form-label">年級</h5>
        <input class="form-control" id="grade" name="grade" placeholder="">
    </div>
</script>
<script id="newMemberBtn">
    <button type="button" id="newMember" name="newMember" class="list-group-item list-group-item-action memberBtn active">新老鼠</button>
</script>

{% endblock content %}